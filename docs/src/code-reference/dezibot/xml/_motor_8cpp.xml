<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.13.2" xml:lang="en-US">
  <compounddef id="_motor_8cpp" kind="file" language="C++">
    <compoundname>Motor.cpp</compoundname>
    <includes refid="_motion_8h" local="yes">Motion.h</includes>
    <incdepgraph>
      <node id="2">
        <label>Motion.h</label>
        <link refid="_motion_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
      </node>
      <node id="1">
        <label>dezibot/src/motion/Motor.cpp</label>
        <link refid="_motor_8cpp"/>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="10">
        <label>IMU_CMDs.h</label>
        <link refid="_i_m_u___c_m_ds_8h"/>
      </node>
      <node id="8">
        <label>motionDetection/MotionDetection.h</label>
        <link refid="_motion_detection_8h"/>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
      </node>
      <node id="4">
        <label>Arduino.h</label>
      </node>
      <node id="9">
        <label>SPI.h</label>
      </node>
      <node id="7">
        <label>driver/ledc.h</label>
      </node>
      <node id="5">
        <label>freertos/FreeRTOS.h</label>
      </node>
      <node id="6">
        <label>freertos/task.h</label>
      </node>
      <node id="3">
        <label>stdint.h</label>
      </node>
    </incdepgraph>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_motion_8h" kindref="compound">Motion.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"><ref refid="class_motor_1a6329b2766faceab988244d01362539aa" kindref="member">Motor::Motor</ref>(uint8_t<sp/>pin,<sp/>ledc_timer_t<sp/>timer,<sp/>ledc_channel_t<sp/>channel){</highlight></codeline>
<codeline lineno="4"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;<ref refid="class_motor_1ac5b603def5973874c29d5b25b7deb42c" kindref="member">pin</ref><sp/>=<sp/><ref refid="class_motor_1ac5b603def5973874c29d5b25b7deb42c" kindref="member">pin</ref>;</highlight></codeline>
<codeline lineno="5"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;<ref refid="class_motor_1abffc4e140e4ee8b988680304c9527bae" kindref="member">channel</ref><sp/>=<sp/><ref refid="class_motor_1abffc4e140e4ee8b988680304c9527bae" kindref="member">channel</ref>;</highlight></codeline>
<codeline lineno="6"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;<ref refid="class_motor_1af1e002fa579fa991c8ea2a81eb98fe44" kindref="member">timer</ref><sp/>=<sp/><ref refid="class_motor_1af1e002fa579fa991c8ea2a81eb98fe44" kindref="member">timer</ref>;</highlight></codeline>
<codeline lineno="7"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;<ref refid="class_motor_1a6cbdaabe22898182b391618fbc9ca4a2" kindref="member">duty</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="8"><highlight class="normal">};</highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_motor_1a6be167642542458d397b08d89513576b" kindref="member">Motor::begin</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">){</highlight></codeline>
<codeline lineno="11"><highlight class="normal"><sp/><sp/><sp/><sp/>pinMode(this-&gt;<ref refid="class_motor_1ac5b603def5973874c29d5b25b7deb42c" kindref="member">pin</ref>,OUTPUT);</highlight></codeline>
<codeline lineno="12"><highlight class="normal"><sp/><sp/><sp/><sp/>ledc_channel_config_t<sp/>channelConfig<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="13"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.gpio_num<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>this-&gt;<ref refid="class_motor_1ac5b603def5973874c29d5b25b7deb42c" kindref="member">pin</ref>,</highlight></codeline>
<codeline lineno="14"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.speed_mode<sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="_motion_8h_1adaeb1cfe90b02710d73c9eb032e05bb6" kindref="member">LEDC_MODE</ref>,</highlight></codeline>
<codeline lineno="15"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.channel<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>this-&gt;<ref refid="class_motor_1abffc4e140e4ee8b988680304c9527bae" kindref="member">channel</ref>,</highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.intr_type<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>LEDC_INTR_DISABLE,</highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.timer_sel<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>this-&gt;<ref refid="class_motor_1af1e002fa579fa991c8ea2a81eb98fe44" kindref="member">timer</ref>,</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.duty<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0,<sp/></highlight><highlight class="comment">//<sp/>Set<sp/>duty<sp/>to<sp/>0%</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.hpoint<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0</highlight></codeline>
<codeline lineno="20"><highlight class="normal"><sp/><sp/><sp/><sp/>};</highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/>ledc_channel_config(&amp;channelConfig);</highlight></codeline>
<codeline lineno="22"><highlight class="normal">};</highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_motor_1a88e5f69c260d67d9f7d25616de8e2bf7" kindref="member">Motor::setSpeed</ref>(uint16_t<sp/>duty){</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>difference<sp/>=<sp/><ref refid="class_motor_1a6cbdaabe22898182b391618fbc9ca4a2" kindref="member">duty</ref>-this-&gt;<ref refid="class_motor_1a1cc4a7f2edd7d4885c96f169bce2d9fd" kindref="member">getSpeed</ref>();</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(difference<sp/>&gt;<sp/>0){</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;i&lt;difference;i+=difference/20){</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;<ref refid="class_motor_1a6cbdaabe22898182b391618fbc9ca4a2" kindref="member">duty</ref><sp/>+=<sp/>difference/20;</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ledc_set_duty(<ref refid="_motion_8h_1adaeb1cfe90b02710d73c9eb032e05bb6" kindref="member">LEDC_MODE</ref>,this-&gt;<ref refid="class_motor_1abffc4e140e4ee8b988680304c9527bae" kindref="member">channel</ref>,<ref refid="class_motor_1a6cbdaabe22898182b391618fbc9ca4a2" kindref="member">duty</ref>);</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ledc_update_duty(<ref refid="_motion_8h_1adaeb1cfe90b02710d73c9eb032e05bb6" kindref="member">LEDC_MODE</ref>,this-&gt;<ref refid="class_motor_1abffc4e140e4ee8b988680304c9527bae" kindref="member">channel</ref>);</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delayMicroseconds(5);</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;i&gt;difference;i-=abs(difference/20)){</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;<ref refid="class_motor_1a6cbdaabe22898182b391618fbc9ca4a2" kindref="member">duty</ref><sp/>-=<sp/>abs(difference/20);</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ledc_set_duty(<ref refid="_motion_8h_1adaeb1cfe90b02710d73c9eb032e05bb6" kindref="member">LEDC_MODE</ref>,this-&gt;<ref refid="class_motor_1abffc4e140e4ee8b988680304c9527bae" kindref="member">channel</ref>,<ref refid="class_motor_1a6cbdaabe22898182b391618fbc9ca4a2" kindref="member">duty</ref>);</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ledc_update_duty(<ref refid="_motion_8h_1adaeb1cfe90b02710d73c9eb032e05bb6" kindref="member">LEDC_MODE</ref>,this-&gt;<ref refid="class_motor_1abffc4e140e4ee8b988680304c9527bae" kindref="member">channel</ref>);</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delayMicroseconds(5);</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal">};</highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal">uint16_t<sp/><ref refid="class_motor_1a1cc4a7f2edd7d4885c96f169bce2d9fd" kindref="member">Motor::getSpeed</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">){</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>this-&gt;<ref refid="class_motor_1a6cbdaabe22898182b391618fbc9ca4a2" kindref="member">duty</ref>;</highlight></codeline>
<codeline lineno="47"><highlight class="normal">};</highlight></codeline>
    </programlisting>
    <location file="dezibot/src/motion/Motor.cpp"/>
  </compounddef>
</doxygen>
